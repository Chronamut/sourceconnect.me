!!!
%html
  %head
    - if content_for?(:title)
      %title
        SourceCONNECT | #{yield(:title)}
    - else
      %title
        SourceCONNECT Beta
    %title Source
    = stylesheet_link_tag    "application", :media => "all"
    = javascript_include_tag "application"
    = csrf_meta_tags
    %meta{:content => "width=device-width, initial-scale=1.0", :name => "viewport"}/
  %body
    = analytics_init
    .row-fluid
      .navbar.navbar-inverse.navbar-fixed-top
        .navbar-inner
          .container-fluid
            %button.btn.btn-navbar{"data-target" => ".nav-collapse", "data-toggle" => "collapse", :type => "button"}
              %span.icon-bar
              %span.icon-bar
              %span.icon-bar
            = link_to "SourceCONNECT ᵇᵉᵗᵃ", posts_path, :class => "brand"
            .nav-collapse.collapse
              %ul.nav
                %li.dropdown
                  %a.dropdown-toggle{"data-toggle" => "dropdown", :href => "#"}
                    Account
                    %b.caret
                  %ul.dropdown-menu
                    - if user_signed_in?
                      %li= link_to('Sign Out', destroy_user_session_path)
                      %li= link_to('Edit Account Info', edit_user_registration_path)
                    - else
                      %li= link_to('Sign In', new_user_session_path)
                      %li= link_to('Register', new_user_registration_path)
                - if user_signed_in?
                  %li
                    = link_to 'New Post', new_post_path
                %li
                  = link_to 'About', '/about'
                - if user_signed_in? && current_user.admin?
                  %li
                    = link_to('Admin', '/radmin', 'data-no-turbolink' => 'true')
    .container-fluid
      - if notice
        .alert
          %button.close{"data-dismiss" => "alert", :type => "button"} ×
          = notice
      .span12
        = yield

:javascript
  var opts = {
  lines: 17, // The number of lines to draw
  length: 40, // The length of each line
  width: 7, // The line thickness
  radius: 48, // The radius of the inner circle
  corners: 1, // Corner roundness (0..1)
  rotate: 71, // The rotation offset
  direction: 1, // 1: clockwise, -1: counterclockwise
  color: '#000', // #rgb or #rrggbb
  speed: 1.1, // Rounds per second
  trail: 100, // Afterglow percentage
  shadow: true, // Whether to render a shadow
  hwaccel: true, // Whether to use hardware acceleration
  className: 'spinner', // The CSS class to assign to the spinner
  zIndex: 2e9, // The z-index (defaults to 2000000000)
  top: 'auto', // Top position relative to parent in px
  left: 'auto' // Left position relative to parent in px
  };
  document.addEventListener("page:fetch", function(){
    var spinner = new Spinner(opts).spin(document.body);
  });
  document.addEventListener("page:recieve", function(){
    spinner.stop();
  });