- content_for(:title) do
  - @post.title
.row.page-header
  %h1.glow
    = @post.title
    %small
      Posted by #{@post.user.username} #{time_ago_in_words(@post.created_at)} ago
#post-body.row
  
  = raw @post.body

%h3.glow Comments
%ul.media-list.row
  - @post.comments.each do |f|
    %ul
      %li.media.combox.span6
        %a.pull-left{:href => "#"}
          %img.media-object.bump2.round{:src => "http://placehold.it/64x64"}/
        .pull-right.comment_user
          .row
            %small
              By #{f.user.username}
          .row
            %small
              #{time_ago_in_words(f.created_at)} ago
        .media-body.comment
          = raw f.body
- if user_signed_in?
  %a.btn{:href => "#comment", :role => 'button', 'data-toggle' => 'modal'}
    Add a comment


.modal.fade.hide#comment
  .modal-header
    %button.close{ :type => 'button', 'data-dismiss' => 'modal', 'data-target' => '#comment'}
      &times
    %h3 Add a comment
    .modal-body
      = simple_form_for([@post, @post.comments.build], :html => {:class => 'form-horizontal'}) do |f|
        .control-group
          = f.input :body, label: false, input_html: { class: 'wysihtml5'}
        .modal-footer.control-group
          %a.btn{:href => "#", :type => 'button', 'data-dismiss' => 'modal', 'data-target' => '#comment'}
            Close
          = f.submit 'Save', :class => 'btn btn-primary'


- if user_signed_in? && can_edit(@post.user,current_user)
  = link_to 'Edit', edit_post_path(@post), :class => 'btn'
  = link_to 'Delete', @post, method: :delete, :class => 'btn', data: { confirm: 'Are you sure you want to delete this? You may never get it back.' }
= link_to 'Back', posts_path, :class => 'btn'
:javascript
  $('.wysihtml5').each(function(i, elem) {
    $(elem).wysihtml5();
  });